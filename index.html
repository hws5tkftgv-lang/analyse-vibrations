<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Poulies & courroie â€” Base saine</title>

<style>
body{
  margin:0;
  background:#0b1436;
  color:#eaf1ff;
  font-family:Arial,sans-serif;
}
header{
  padding:14px;
  background:#0f1a44;
}
h1{margin:0;font-size:18px}

.panel{
  padding:14px;
  display:grid;
  gap:12px;
  background:#101a40;
}
input{
  width:100%;
  padding:10px;
  font-size:16px;
  border:none;
  border-radius:10px;
}

canvas{
  display:block;
  margin:0 auto;
  background:#000;
}
.info{
  padding:14px;
  background:#0f1a44;
  font-size:14px;
}
</style>
</head>

<body>

<header>
  <h1>ðŸ”„ Poulies & courroie â€” Test fondamental</h1>
</header>

<div class="panel">
  <input id="rpm" type="number" value="1200" placeholder="RPM motrice">
  <input id="d1" type="number" value="100" placeholder="Ã˜ menante">
  <input id="d2" type="number" value="400" placeholder="Ã˜ menÃ©e">
</div>

<canvas id="c" width="420" height="260"></canvas>
<div class="info" id="info"></div>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");

const rpmI = document.getElementById("rpm");
const d1I  = document.getElementById("d1");
const d2I  = document.getElementById("d2");
const info = document.getElementById("info");

let a1 = 0;
let a2 = 0;

function loop(){
  ctx.clearRect(0,0,c.width,c.height);

  const rpm1 = +rpmI.value;
  const d1   = Math.max(1,+d1I.value);
  const d2   = Math.max(1,+d2I.value);

  const rpm2 = rpm1 * (d1/d2);

  const hz1 = rpm1 / 60;
  const hz2 = rpm2 / 60;

  // === Positions FIXES (indestructibles) ===
  const y  = c.height/2;
  const x1 = 110;
  const x2 = 310;

  const r1 = 24;
  const r2 = r1 * (d2/d1);

  // === Courroie (comme ton Python) ===
  ctx.strokeStyle="#777";
  ctx.lineWidth=4;
  ctx.beginPath();
  ctx.moveTo(x1, y-r1);
  ctx.lineTo(x2, y-r2);
  ctx.moveTo(x1, y+r1);
  ctx.lineTo(x2, y+r2);
  ctx.stroke();

  // === Poulie menante ===
  ctx.save();
  ctx.translate(x1,y);
  ctx.rotate(a1);
  ctx.strokeStyle="#00a2ff";
  ctx.lineWidth=3;
  ctx.beginPath();
  ctx.arc(0,0,r1,0,Math.PI*2);
  ctx.stroke();
  ctx.fillStyle="#00a2ff";
  ctx.beginPath();
  ctx.arc(r1,0,4,0,Math.PI*2);
  ctx.fill();
  ctx.restore();

  // === Poulie menÃ©e ===
  ctx.save();
  ctx.translate(x2,y);
  ctx.rotate(a2);
  ctx.strokeStyle="#ff9800";
  ctx.lineWidth=3;
  ctx.beginPath();
  ctx.arc(0,0,r2,0,Math.PI*2);
  ctx.stroke();
  ctx.fillStyle="#ff9800";
  ctx.beginPath();
  ctx.arc(r2,0,4,0,Math.PI*2);
  ctx.fill();
  ctx.restore();

  info.innerHTML = `
    ðŸ”µ Menante : ${rpm1.toFixed(0)} RPM / ${(hz1).toFixed(2)} Hz<br>
    ðŸŸ  MenÃ©e : ${rpm2.toFixed(0)} RPM / ${(hz2).toFixed(2)} Hz
  `;

  // === ROTATIONS DÃ‰COUPLÃ‰ES (LA CLÃ‰) ===
  a1 += hz1 * 0.05;
  a2 += hz2 * 0.05;

  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>