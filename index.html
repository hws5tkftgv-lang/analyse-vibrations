<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Courroie seule — géométrie correcte</title>

<style>
html,body{
  margin:0;
  background:#0b1436;
}
canvas{
  display:block;
  margin:20px auto;
  background:#000;
  border-radius:14px;
}
</style>
</head>

<body>
<canvas id="c" width="800" height="400"></canvas>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");

const TAU = Math.PI*2;

// ===============================
// PARAMÈTRES PHYSIQUES
// ===============================
const d1 = 4 * 25.4;   // Ø menante (mm)
const d2 = 9 * 25.4;   // Ø menée (mm)
const C  = 21 * 25.4;  // centre-centre (mm)

// ===============================
// MISE À L'ÉCHELLE ÉCRAN
// ===============================
const r1mm = d1/2;
const r2mm = d2/2;

const margin = 60;
const scale = Math.min(
  (c.width - 2*margin) / (C + r1mm + r2mm),
  (c.height - 2*margin) / (2*Math.max(r1mm,r2mm))
);

const r1 = r1mm * scale;
const r2 = r2mm * scale;
const Cpx = C * scale;

const x1 = margin + r1;
const x2 = x1 + Cpx;
const y  = c.height/2;

// ===============================
// GÉOMÉTRIE DES TANGENTES EXTERNES
// ===============================
const phi = Math.acos( (r2mm - r1mm) / C );

const aL_top =  Math.PI/2 - phi;
const aL_bot = -Math.PI/2 + phi;

const aR_top =  Math.PI/2 + phi;
const aR_bot = 3*Math.PI/2 - phi;

const Ltop = { x:x1 + r1*Math.cos(aL_top), y:y + r1*Math.sin(aL_top) };
const Lbot = { x:x1 + r1*Math.cos(aL_bot), y:y + r1*Math.sin(aL_bot) };
const Rtop = { x:x2 + r2*Math.cos(aR_top), y:y + r2*Math.sin(aR_top) };
const Rbot = { x:x2 + r2*Math.cos(aR_bot), y:y + r2*Math.sin(aR_bot) };

// ===============================
// DESSIN COURROIE (CHEMIN UNIQUE)
// ===============================
ctx.strokeStyle="#b0b0b0";
ctx.lineWidth=6;
ctx.lineJoin="round";
ctx.lineCap="round";

ctx.beginPath();

// segment supérieur
ctx.moveTo(Ltop.x, Ltop.y);
ctx.lineTo(Rtop.x, Rtop.y);

// arc grande poulie (extérieur)
ctx.arc(x2, y, r2, aR_top, aR_bot, false);

// segment inférieur
ctx.lineTo(Lbot.x, Lbot.y);

// arc petite poulie (extérieur)
ctx.arc(x1, y, r1, aL_bot, aL_top, false);

ctx.stroke();
</script>
</body>
</html>